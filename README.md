# KurotoriVRM WebViewer - 使用方法ガイド

WebGLベースで動作するVRMビューワーです。ブラウザ上でVRMモデルを表示・操作できるWebアプリケーションです。

## 🚀 クイックスタート

### 開発環境での起動
```bash
npm install
npm run dev
```
ブラウザで `http://localhost:5173` にアクセスしてください。

### 本番ビルド
```bash
npm run build
npm run preview
```

## 📖 基本的な使い方

### 1. VRMファイルの読み込み

#### 方法1: ファイル選択
1. 左サイドバーの「VRMファイル読み込み」ボタンをクリック
2. モーダルが開くので「ローカルファイル」セクションでファイルを選択
3. 複数のVRMファイルを同時に選択可能

#### 方法2: ドラッグ&ドロップ
1. 「VRMファイル読み込み」ボタンをクリック
2. ドロップゾーンにVRMファイルをドラッグ&ドロップ
3. 複数ファイルの同時ドロップに対応

#### 方法3: サンプルファイル
1. 「VRMファイル読み込み」ボタンをクリック
2. 「サンプルファイル」セクションで以下を選択
   - **サンプル VRM0**: VRM0形式のサンプルモデル
   - **サンプル VRM1**: VRM1形式のサンプルモデル

### 2. モデルの選択・操作

#### モデル選択
- **マウスクリック**: 3Dビューでモデルをクリックして選択
- **モデルリスト**: 左サイドバーのモデル一覧から選択
- **キーボード**: 数字キー1-5でモデルを直接選択
- **矢印キー**: ←→キーで前後のモデルを選択
- **Escキー**: 選択を解除

#### 選択中モデルの操作
選択すると右下に「選択中モデル設定」モーダルが表示されます：

- **中央寄せ**: モデルを画面中央に配置
- **フォーカス**: カメラをモデルに向ける
- **スケール調整**: スライダーでモデルサイズを変更（0.1-3.0倍）
- **表示/非表示**: モデルの表示切り替え
- **複製**: 選択中のモデルをコピー
- **削除**: 選択中のモデルまたは全モデルを削除

### 3. カメラ操作

#### マウス操作
- **左ドラッグ**: 視点回転
- **右ドラッグ**: パン（平行移動）
- **ホイール**: ズームイン/アウト

#### カメラリセット
- **デフォルト位置**: 初期カメラ位置に戻す
- **全体表示**: 全モデルが見えるように調整
- **アニメーション**: 滑らかにカメラを移動

#### キーボードショートカット
- **Rキー**: カメラをデフォルト位置にリセット

### 4. ライト調整

左サイドバーの「ライト調整」セクションで以下を設定：

#### 環境光（Ambient Light）
- **強度**: 0.0-2.0の範囲で調整
- **色**: カラーピッカーで色を変更

#### 方向性ライト（Directional Light）
- **強度**: 0.0-3.0の範囲で調整
- **色**: カラーピッカーで色を変更

#### リムライト
- **強度**: 0.0-2.0の範囲で調整
- **色**: カラーピッカーで色を変更（デフォルト: 水色）

#### ライト制御
- **ライトヘルパー表示**: ライトの方向を視覚化
- **方向性ライト選択**: ライトを直接操作（実装予定）
- **ライトリセット**: 全ライト設定を初期値に戻す

### 5. 背景設定

左サイドバーの「背景設定」セクションで背景をカスタマイズ：

- **背景色**: カラーピッカーで自由に設定
- **プリセット色**: ワンクリックで設定
  - **白**: 明るい背景
  - **黒**: 暗い背景
  - **グレー**: デフォルトの中間色
- **背景リセット**: デフォルト色（グレー）に戻す

### 6. ボーン操作・ポージング

選択中モデル設定モーダルの「ボーン操作」セクション：

#### ボーン表示
- **ボーン表示切替**: モデルのボーン構造を表示/非表示
- **ポーズリセット**: 全ボーンを初期ポーズに戻す

#### 操作モード
- **回転モード**: ボーンを回転させてポージング
- **移動モード**: ボーンを移動させて調整

#### ボーン選択・操作
- 3Dビューでボーンをクリックして選択
- 選択中のボーン名が表示される
- Transform Controlsでボーンを直接操作

## 🎯 高度な機能

### VRMメタ情報の表示
- モデルリストの「ℹ️」ボタンをクリック
- VRMファイルに含まれるメタデータを確認
- 作者情報、ライセンス、使用条件などを表示

### 複数モデル管理
- 最大5体まで同時読み込み可能
- 各モデルを個別に選択・操作
- モデルごとに独立したスケール・表示設定

### ViewportGizmo
- 画面右上の3Dギズモで視点を素早く変更
- X/Y/Z軸方向への瞬時移動
- 直感的なカメラ操作

## ⌨️ キーボードショートカット一覧

| キー | 機能 |
|------|------|
| `1-5` | モデル1-5を直接選択 |
| `←` `→` | 前/次のモデルを選択 |
| `Esc` | モデル選択を解除 |
| `R` | カメラをデフォルト位置にリセット |

## 🔧 技術仕様

### 対応フォーマット
- **VRM 0.x**: 従来のVRM形式
- **VRM 1.0**: 最新のVRM形式

### 技術スタック
- **3D描画**: Three.js
- **VRM読込**: @pixiv/three-vrm
- **開発環境**: Vite + TypeScript
- **GUI**: lil-gui
- **3Dギズモ**: three-viewport-gizmo

### ブラウザ要件
- WebGL対応ブラウザ
- モダンブラウザ（Chrome, Firefox, Safari, Edge）
- JavaScript有効

## 🐛 トラブルシューティング

### ファイルが読み込めない場合
1. VRMファイルが破損していないか確認
2. ファイルサイズが大きすぎないか確認
3. ブラウザのコンソールでエラーを確認

### 動作が重い場合
1. 複数モデルを読み込んでいる場合は削除を検討
2. ライトヘルパーを非表示にする
3. ブラウザを再読み込みする

### ボーン操作ができない場合
1. モデルが選択されているか確認
2. ボーン表示が有効になっているか確認
3. 操作モード（回転/移動）を確認

## 📄 ライセンス

MIT License

## 👥 開発者

KurotoriVRM Project

---

**Note**: このビューワーは開発中のため、機能や仕様が変更される可能性があります。最新の情報は `Docs/Todo.md` を参照してください。
