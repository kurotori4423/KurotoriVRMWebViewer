# アクティブタスク管理

## 現在のタスク

**タスクID**: FIX-007  
**開始日時**: 2025年06月28日 14:57:16  
**完了日時**: -  
**ステータス**: 🔄 実行中  
**複雑度**: Level 1 (Quick Bug Fix)  
**概要**: ダークテーマ対応（メタ情報ウィンドウの白文字白背景問題修正）

### 要件詳細
- ダークテーマでブラウザを利用している場合、VRMのメタ情報ウィンドウが白文字白背景になり見えなくなる
- ダークテーマでも適切にメタ情報が表示されるよう修正
- CSS修正で対応可能

### 実装予定箇所
- メタ情報ウィンドウのスタイル設定
- ダークテーマ検出とスタイル適用

### 技術課題
- ダークテーマ検出機能
- 適切な色彩コントラスト設定

---

## 待機中タスク

### タスクID: FIX-008
**複雑度**: Level 1 (Quick Bug Fix)  
**概要**: TransformControlsでボーン回転後の選択解除問題修正

**要件詳細**:
- TransformControlsでボーンを回転させた後にボーンの選択が解除される問題
- 原因：空間クリック時のボーン選択解除機能の誤爆（clickイベントがドラッグ後の座標で評価）
- 解決：ボーン選択解除をmousedownの段階で判定するよう変更

### タスクID: FEAT-008
**複雑度**: Level 1 (Quick Bug Fix)  
**概要**: 複数体モデル読み込み時のカメラフォーカス制御

**要件詳細**:
- 複数体モデルを読み込んで選択するとき、モデルに対してカメラがフォーカスしないでそのままでいて欲しい
- 現在の自動フォーカス機能を無効化または設定可能にする

---

## 最新完了タスク

**タスクID**: FIX-006  
**開始日時**: 2025年06月28日 14:51:20  
**完了日時**: 2025年06月28日 14:57:16  
**ステータス**: ✅ 完了  
**複雑度**: Level 1 (Quick Bug Fix)  
**概要**: 方向性ライトのTransformControlsを回転ギズモに変更

### 要件詳細
- ✅ 方向性ライトは向きだけの操作でよいため、移動ギズモは不要
- ✅ 現在移動ギズモになっているTransformControlsを回転ギズモに変更
- ✅ 方向性ライトの操作性を向上させる

### 実装結果
- ✅ **TransformControlsモード変更**: `setMode('translate')` → `setMode('rotate')`に変更
- ✅ **回転処理実装**: 方向性ライトの回転がターゲット位置に正しく反映される処理を追加
- ✅ **ベクトル計算**: デフォルト下向き(0,-1,0)にquaternion回転を適用してターゲット位置計算
- ✅ **コライダー同期**: 選択用コライダーの回転も同期
- ✅ **動作確認**: ブラウザテストで回転ギズモによるライト向き変更を確認

### 実装箇所
- `src/core/LightController.ts`: TransformControlsモード変更、回転処理実装

### 技術仕様
- **ギズモタイプ**: 回転ギズモ（XYZ軸のリング）
- **回転方式**: quaternion回転をターゲット位置に適用
- **制御方式**: `lightTransformControls.setMode('rotate')`

### 実際作業時間
約6分（効率的な修正）

**関連ドキュメント**:
- コミット予定: 方向性ライト回転ギズモ化 + 回転処理実装完了

---

次のタスクが開始されたら、この欄にタスク詳細を記録してください。 